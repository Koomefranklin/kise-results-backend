{% load i18n static %}
{% load static tailwind_tags %}
<!DOCTYPE html>
{% get_current_language as LANGUAGE_CODE %}{% get_current_language_bidi as LANGUAGE_BIDI %}
<html lang="{{ LANGUAGE_CODE|default:'en-us' }}" dir="{{ LANGUAGE_BIDI|yesno:'rtl,ltr,auto' }}">
<head>
<title>{% block title %}{% endblock %}</title>
{% block extrahead %}
<script>
  window.onload = function () {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        (position) => {
          // Get latitude and longitude
          const latitude = position.coords.latitude;
          const longitude = position.coords.longitude;

          // Set the values in the form
          document.getElementById('id_latitude').value = latitude;
          document.getElementById('id_longitude').value = longitude;
        },
        (error) => {
          console.error('Error obtaining location:', error);
            alert('Unable to access your location. Please enable location permissions.');
        }
      );
    } else {
      console.log('Geolocation is not supported by this browser.');
      alert('Geolocation is not supported by your browser.');
    }
  };
</script>
{% endblock %}
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="author" content="Koome Franklin"/>
<meta name="color-scheme" content="dark light">
<link rel="icon" type="image/x-icon" href="{{ MEDIA_URL }}icons/favicon.ico"/>
{% block blockbots %}<meta name="robots" content="NONE,NOARCHIVE">{% endblock %}
{% tailwind_preload_css %}
{% tailwind_css %}
<link href="{% static 'fontawesomefree/css/all.min.css' %}" rel="stylesheet" type="text/css">
</head>

<body class='w-screen h-screen dark:bg-slate-900 flex flex-col overflow-hidden'
  data-admin-utc-offset="{% now 'Z' %}">

   <div class='sticky top-0 z-50 w-screen h-fit'>
     <!-- Header -->
    {% block header %}
      <header id="header" class='w-full h-fit grid grid-flow-col p-2 bg-[#ffcb05]'>
        <div id="branding" class='grid'>
        {% block branding %}{% endblock %}
        </div>
        {% block usertools %}
          
          {% if user.is_authenticated %}
            
            <div id="user-tools" class='grid grid-flow-col justify-end gap-px text-black'>
              {% block welcome-msg %}
                  {% translate 'Welcome,' %}
                  <strong class='uppercase'>{% firstof user.full_name user.get_username %}, {{ user.role }}</strong>.
              {% endblock %}
              {% block userlinks %}
                  {% if user.has_usable_password %}
                    <a href="{% url 'password-change' user.pk %}">{% translate 'Change password' %}</a> /
                  {% endif %}
                  <form id="logout-form" method="post" action="{% url 'logout' %}">
                      {% csrf_token %}
                      <button type="submit">{% translate 'Log out' %}</button>
                  </form>
              {% endblock %}
            </div>

          {% endif %}
        {% endblock %}
        {% block nav-global %}{% endblock %}
      </header>
    {% endblock %}
    <!-- END Header -->

    {% block nav-breadcrumbs %}
      <nav aria-label="{% translate 'Breadcrumbs' %}" class='w-full border-b bg-[#4caf50]'>
        {% block breadcrumbs %}
          <div class="w-full">
            <a href="{% url 'index' %}">{% translate 'Home' %}</a>
            {% if title %} &rsaquo; {{ title }}{% endif %}
          </div>
        {% endblock %}
      </nav>
    {% endblock %}
   </div>

    <div class="flex w-full h-full overflow-y-auto p-3" id="main">
       
       {% if is_nav_enabled %}
         <div class='w-80 flex sticky left-0 top-0 bottom-0 shadow-2xl overflow-y-auto border-r-2'>
          {% block nav-sidebar %}
            {% include "teaching_practice/nav_sidebar.html" %}
          {% endblock %}
        </div>
       {% endif %}
        
      <main id="content-start" class="h-full w-full p-4 overflow-y-auto mb-10" tabindex="-1">
        
        
          
        {% block messages %}
          {% if messages %}
            <ul class="grid w-full h-fit bg-[#4caf50] text-white">
              {% for message in messages %}
              <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message|capfirst }}</li>
            {% endfor %}</ul>
          {% endif %}
        {% endblock messages %}

        <!-- Content -->
        <div id="content" class="w-full h-full grid">
          {% block pretitle %}{% endblock %}
          {% block content_title %}{% if title %}{% endif %}{% endblock %}
          {% block content_subtitle %}{% if subtitle %}<h2>{{ subtitle }}</h2>{% endif %}{% endblock %}
          {% block main %}
            {% block object-tools %}{% endblock %}
            {{ main }}
          {% endblock %}
          {% block sidebar %}{% endblock %}
          <br class="clear">
        </div>
        <!-- END Content -->
      </main>
    </div>
    {% block footer %}<footer id="footer" class='sticky bottom-0 justify-center h-fit w-screen p-3 bg-black text-white text-right'>Developed by: Koome Franklin</footer>{% endblock %}

</body>
</html>
